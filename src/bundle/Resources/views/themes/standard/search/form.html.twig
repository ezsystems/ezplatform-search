{% trans_default_domain 'search' %}

{{ form_start(form, {'attr': {'class': 'ez-search-form'}}) }}
<div class="input-group px-4">
    {{ form_widget(form.query) }}
    <span class="input-group-btn">
        <span class="ml-4" {% if form.search_language.vars.choices|length == 1 %}hidden{% endif %}>
            {{ form_widget(form.search_language, {'attr': {'class': 'ez-search-form__language-selector'}}) }}
        </span>
    </span>
</div>

<div class="ez-filters mt-4 ml-4 pt-2 ez-filters--collapsed">
    <div class="ez-filters__row">
        <div class="ez-filters__item ez-filters__item--content-type">
            <label class="ez-filters__item-label">{{ 'search.content.type'|trans|desc('Content Type:') }}</label>
            <select class="form-control ez-filters__select ez-filters__select--content-type" hidden>
                <option class="ez-filters__option ez-filters__option--hidden" data-default="{{ 'search.any.content.type'|trans|desc('Any Content Type') }}" value="">{{ 'search.any.content.type'|trans|desc('Any Content Type') }}</option>
            </select>
            {{ form_widget(form.content_types, {'attr': {'class': 'ez-filters__select'}}) }}
        </div>
    </div>
    <div class="ez-filters__row">
        {% if form.section is defined %}
            <div class="ez-filters__item ez-filters__item--section">
                <label class="ez-filters__item-label">{{ 'search.section'|trans|desc('Section:') }}</label>
                {{ form_widget(form.section, {'attr': {'class': 'ez-filters__select'}}) }}
            </div>
        {% endif %}
    </div>
    <div class="ez-filters__row">
        <div class="ez-filters__item ez-filters__item--modified">
            <label class="ez-filters__item-label">{{ 'search.last.modified'|trans|desc('Last modified:') }}</label>
            {{ form_widget(form.last_modified_select, {'attr': {'class': 'ez-filters__select', 'data-target-selector': '.ez-filters__range-wrapper--select-modified-range'}}) }}
            {{ form_errors(form.last_modified_select) }}
        </div>
        <div class="ez-filters__item ez-filters__item--created">
            <label class="ez-filters__item-label">{{ 'search.created'|trans|desc('Created:') }}</label>
            {{ form_widget(form.created_select, {'attr': {'class': 'ez-filters__select', 'data-target-selector': '.ez-filters__range-wrapper--select-created-range'}}) }}
            {{ form_errors(form.created_select) }}
        </div>
        <div class="ez-filters__item ez-filters__item--creator">
            <label class="ez-filters__item-label">{{ 'search.creator'|trans|desc('Creator:') }}</label>
            {% set creator = form.vars.data.creator %}
            <div class="ez-filters__input-wrapper">
                <input type="text"
                    class="form-control ez-filters__input"
                    data-content-type-identifiers="{{ user_content_type_identifier|join(',') }}"
                    value="{{ creator is not empty ? ez_content_name(creator) }}"
                    placeholder="{{ 'search.creator_input.placeholder'|trans|desc('Type creator\'s name') }}"
                    {{ creator is not empty ? 'disabled'  }}
                >
            </div>
            <ul class="ez-filters__user-list ez-filters__user-list--hidden"></ul>
        </div>
    </div>
    <div class="ez-filters__btns">
        <button type="submit" class="btn btn-secondary ez-btn-apply font-weight-bold">
            {{ 'search.search'|trans|desc('Search') }}
        </button>
    </div>
</div>
{{ form_widget(form.last_modified, {'attr': {'hidden': 'hidden'}}) }}
{{ form_widget(form.created, {'attr': {'hidden': 'hidden'}}) }}
{{ form_widget(form.creator, {'attr': {'hidden': 'hidden'}}) }}
{{ form_end(form) }}
